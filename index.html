<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<title>Sika â€“ kahdella nopalla</title>
<style>
  body { font-family: Arial; padding: 20px; }
  button { padding: 10px 15px; margin: 5px; }
  .info { margin: 10px 0; }
</style>
</head>
<body>

<h1>ðŸŽ² Sika â€“ kahdella nopalla</h1>

<div>
  <label>Pelaajien nimet (pilkulla erotettuna): </label>
  <input id="players" placeholder="Esim. Ville,Mari">
  <button onclick="aloitaPeli()">Aloita peli</button>
</div>

<div id="game" style="display:none; margin-top:20px;">
  <p id="vuoro"></p>
  <p id="heitto"></p>
  <p id="vuoronPisteet"></p>
  <p id="kokonaispisteet"></p>
  <button onclick="heittoNoppia()">HeitÃ¤ noppia</button>
  <button onclick="lopetaVuoro()">Lopeta vuoro</button>
</div>

<script>
let pelaajat = [];
let pisteet = [];
let vuoronPisteet = 0;
let nykyinen = 0;
let tuplaJono = 0;
let tavoite = 100;

function aloitaPeli() {
  pelaajat = document.getElementById("players").value.split(",").map(p => p.trim());
  pisteet = Array(pelaajat.length).fill(0);
  vuoronPisteet = 0;
  nykyinen = 0;
  tuplaJono = 0;
  document.getElementById("game").style.display = "block";
  paivitaVuoro();
}

function heittoNoppia() {
  let noppa1 = Math.floor(Math.random() * 6) + 1;
  let noppa2 = Math.floor(Math.random() * 6) + 1;
  document.getElementById("heitto").innerText = `Heitit: ${noppa1} ja ${noppa2}`;
  
  // Tarkistetaan erikoistilanteet
  if (noppa1 === 1 && noppa2 === 1) {
    vuoronPisteet += 25;
    tuplaJono = 0;
    alert("Kaksi ykkÃ¶stÃ¤! Saat 25 pistettÃ¤.");
  } else if (noppa1 === noppa2) {
    let tuplapisteet = (noppa1 + noppa2) * 2;
    vuoronPisteet += tuplapisteet;
    tuplaJono++;
    alert(`Tuplat! Saat ${tuplapisteet} pistettÃ¤.`);
    if (tuplaJono >= 3) {
      alert("Kolme tuplaa perÃ¤kkÃ¤in! Vuoro pÃ¤Ã¤ttyy ja pisteet menetetÃ¤Ã¤n.");
      vuoronPisteet = 0;
      seuraavaVuoro();
      return;
    }
  } else if (noppa1 === 1 || noppa2 === 1) {
    alert("Yksi ykkÃ¶nen! Vuoro pÃ¤Ã¤ttyy, et saa pisteitÃ¤.");
    vuoronPisteet = 0;
    tuplaJono = 0;
    seuraavaVuoro();
    return;
  } else {
    vuoronPisteet += noppa1 + noppa2;
    tuplaJono = 0;
  }

  paivitaKokonaispisteet();
  document.getElementById("vuoronPisteet").innerText = `Vuoron pisteet: ${vuoronPisteet}`;
}

function lopetaVuoro() {
  pisteet[nykyinen] += vuoronPisteet;
  if (pisteet[nykyinen] >= tavoite) {
    alert(`${pelaajat[nykyinen]} voitti pelin ${pisteet[nykyinen]} pisteellÃ¤! ðŸŽ‰`);
    document.getElementById("game").style.display = "none";
  } else {
    seuraavaVuoro();
  }
}

function seuraavaVuoro() {
  nykyinen = (nykyinen + 1) % pelaajat.length;
  vuoronPisteet = 0;
  tuplaJono = 0;
  paivitaVuoro();
}

function paivitaVuoro() {
  document.getElementById("vuoro").innerText = `Nykyinen vuoro: ${pelaajat[nykyinen]}`;
  document.getElementById("heitto").innerText = "";
  document.getElementById("vuoronPisteet").innerText = `Vuoron pisteet: ${vuoronPisteet}`;
  paivitaKokonaispisteet();
}

function paivitaKokonaispisteet() {
  let teksti = "Kokonaispisteet:\n";
  for (let i = 0; i < pelaajat.length; i++) {
    teksti += `${pelaajat[i]}: ${pisteet[i]} pistettÃ¤\n`;
  }
  document.getElementById("kokonaispisteet").innerText = teksti;
}
</script>

</body>
</html>
